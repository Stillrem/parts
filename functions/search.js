import { aggregate } from '../lib/aggregate.js';export default async function handler(req,res){const q=(req.query&&req.query.q)||'';if(!q)return res.status(400).json({error:'Missing q'});try{const items=await aggregate(q);res.setHeader('Cache-Control','s-maxage=300, stale-while-revalidate=600');return res.status(200).json({items})}catch(e){return res.status(500).json({error:e.message})}}
